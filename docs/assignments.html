<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>EPsy 8251 - Assignments and Grading</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://kit.fontawesome.com/e5da75ca36.js" crossorigin="anonymous"></script>


<link rel="stylesheet" href="assets/sticky-notes.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">EPsy 8251</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./schedule.html"> 
<span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./assignments.html" aria-current="page"> 
<span class="menu-text">Assignments &amp; Grading</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data.html"> 
<span class="menu-text">Data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">Instructor &amp; TA</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./class-policies.html"> 
<span class="menu-text">Class Policies</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./mission-statements.html"> 
<span class="menu-text">Mission Statements</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./umn-policies.html"> 
<span class="menu-text">University Policies</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#tips-for-successful-collaborations" id="toc-tips-for-successful-collaborations" class="nav-link active" data-scroll-target="#tips-for-successful-collaborations">Tips for Successful Collaborations</a></li>
  <li><a href="#assignment-due-dates" id="toc-assignment-due-dates" class="nav-link" data-scroll-target="#assignment-due-dates">Assignment Due Dates</a>
  <ul class="collapse">
  <li><a href="#stress-management" id="toc-stress-management" class="nav-link" data-scroll-target="#stress-management">Stress Management</a></li>
  </ul></li>
  <li><a href="#evaluation-of-student-performance" id="toc-evaluation-of-student-performance" class="nav-link" data-scroll-target="#evaluation-of-student-performance">Evaluation of Student Performance</a>
  <ul class="collapse">
  <li><a href="#incomplete" id="toc-incomplete" class="nav-link" data-scroll-target="#incomplete">Incomplete</a></li>
  <li><a href="#accessing-course-grades" id="toc-accessing-course-grades" class="nav-link" data-scroll-target="#accessing-course-grades">Accessing Course Grades</a></li>
  </ul></li>
  <li><a href="#assignment-faqs" id="toc-assignment-faqs" class="nav-link" data-scroll-target="#assignment-faqs">Assignment FAQs</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Assignments and Grading</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Students will complete six homework assignments. The homework assignments and due dates are posted below. These assignments include problems that will help you learn the course material through reflection and practice. Submit each assignment as a PDF file via email to the TA.</p>
<p>To foster cooperation and collaboration, you are permitted to form groups of no larger than three to work on the homework. Submit only one assignment per group, and list the names of each group member on the assignment. Each assignment will be scored and this score will be given to all individuals in the group. If you work alone on the assignments, you need to truly work alone. To protect against running afoul of the scholastic dishonesty policy, students working alone are <strong>not permitted to interact with any other student in regards to the assignment</strong>, including discussion, obtaining help, etc.</p>
<section id="tips-for-successful-collaborations" class="level3 collaboration">
<h3 class="anchored" data-anchor-id="tips-for-successful-collaborations">Tips for Successful Collaborations</h3>
<p>From past experience, student collaborations work most fluidly when everyone in the group is on the same page. Whether it be grade and working expectations, commitment to the course during the semester, or process for getting the work done, it is important to explicitly lay out and communicate your expectations to your group members. The most successful groups communicate with one another. The more you can anticipate issues and communicate about them, the better the experience for everyone. Here are some questions you may want to address as you form your groups:</p>
<ul>
<li>What process works best for our group for working together towards the assignment?</li>
<li>Do we want to each complete individually and share with each other?</li>
<li>Would we want to meet and work on it together at the same time?</li>
<li>Do we want to rotate who submits the assignment?</li>
<li>How will we deal with the possibility that one member of the group is falling behind?</li>
</ul>
</section>
<p><br></p>
<section id="assignment-due-dates" class="level2">
<h2 class="anchored" data-anchor-id="assignment-due-dates">Assignment Due Dates</h2>
<p>Below are the due dates for the assignments, as well as links to each assignment. <em>All assignments are due by 5:00 PM on the due date.</em> The due dates may change at the instructor‚Äôs discretion. Any revised due dates will be announced in class and posted to the website.</p>
<p><br></p>
<table class="table">
<thead>
<tr>
<th style="width:50%;">
Assignment
</th>
<th style="width:15%;">
Due Date (M/W)
</th>
<th style="width:15%;">
Due Date (T/R)
</th>
<th style="width:10%;text-align:center">
HTML
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Assignment #1: <em>Introduction to Statistical Computing</em> <!-- <span style="margin-left:20px; color:red;">*[Updated 09-13-2021]*</span> -->
</td>
<td>
Spt. 25
</td>
<td>
Spt. 24
</td>
<td align="center" style="vertical-align:middle;">
<a href="assignments/assignment-01-introduction-to-statistical-computing.html"><span class="fas fa-link" style="font-size: 20px;"></span></a>
</td>
</tr>
<tr>
<td>
Assignment #2: <em>Introduction to Regression</em>
</td>
<td>
Oct.&nbsp;14
</td>
<td>
Oct.&nbsp;10
</td>
<td align="center" style="vertical-align:middle;">
<a href="assignments/assignment-02-introduction-to-regression.html"><span class="fas fa-link" style="font-size: 20px;"></span></a>
</td>
</tr>
<tr>
<td>
Assignment #3: <em>Regression Inference</em>
</td>
<!-- <span style="margin-left:20px; color:red;">*[Updated 10-11-2023]*</span> -->
<td>
Nov.&nbsp;06
</td>
<td>
Nov.&nbsp;05
</td>
<td align="center" style="vertical-align:middle;">
<a href="assignments/assignment-03-regression-inference.html"><span class="fas fa-link" style="font-size: 20px;"></span></a>
</td>
</tr>
<tr>
<td>
Assignment #4: <em>Multiple Regression</em>
</td>
<td>
Nov.&nbsp;25
</td>
<td>
Nov.&nbsp;21
</td>
<td align="center" style="vertical-align:middle;">
<a href="assignments/assignment-04-introduction-to-multiple-regression.html"><span class="fas fa-link" style="font-size: 20px;"></span></a>
</td>
</tr>
<tr>
<td>
Assignment #5: <em>Categorical Predictors</em> <!-- <span style="margin-left:20px; color:red;">*[Updated 11-12-2019]*</span> -->
</td>
<td>
Dec.&nbsp;04
</td>
<td>
Dec.&nbsp;03
</td>
<td align="center" style="vertical-align:middle;">
<a href="assignments/assignment-05-categorical-predictors.html"><span class="fas fa-link" style="font-size: 20px;"></span></a>
</td>
</tr>
<tr>
<td>
Assignment #6: <em>Interaction Models</em>
</td>
<td colspan="2">
Dec.&nbsp;16 (due at 12:00pm)
</td>
<td align="center" style="vertical-align:middle;">
<a href="assignments/assignment-06-interaction-models.html"><span class="fas fa-link" style="font-size: 20px;"></span></a>
</td>
</tr>
</tbody>
</table>
<p><br></p>
<section id="stress-management" class="level3 stress">
<h3 class="anchored" data-anchor-id="stress-management">Stress Management</h3>
<p>Stress management is an important piece of the skill set needed for success in graduate school. Pet Away Worry &amp; Stress (PAWS) is one of the many resources available to students. Find out more at <a href="https://boynton.umn.edu/paws">https://boynton.umn.edu/paws</a>.</p>
<p style="font-size:70%;">
You can follow Tilly the Therapy Chicken on Twitter (<span class="citation" data-cites="TherapyChicken">@TherapyChicken</span>).
</p>
</section>
<p><br></p>
</section>
<section id="evaluation-of-student-performance" class="level2">
<h2 class="anchored" data-anchor-id="evaluation-of-student-performance">Evaluation of Student Performance</h2>
<p>Course grades will be based entirely on performance on the homework assignments. The points from the six homework assignment will be pooled to compute a percentage in the class, which will be converted to a final course grade using:</p>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 11%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th>Cutoff</th>
<th>Grade</th>
<th>Definition for Graduate Credit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>93%‚Äì100%</td>
<td>A</td>
<td>For exceptional work, well above the minimum criteria</td>
</tr>
<tr class="even">
<td>90%‚Äì92%</td>
<td>A‚Äì</td>
<td>For outstanding work, well above the minimum criteria</td>
</tr>
<tr class="odd">
<td>87%‚Äì89%</td>
<td>B+</td>
<td>For excellent work, significant above the minimum criteria</td>
</tr>
<tr class="even">
<td>83%‚Äì86%</td>
<td>B</td>
<td>For work above the minimum criteria</td>
</tr>
<tr class="odd">
<td>80%‚Äì82%</td>
<td>B‚Äì</td>
<td></td>
</tr>
<tr class="even">
<td>77%‚Äì79%</td>
<td>C+</td>
<td></td>
</tr>
<tr class="odd">
<td>73%‚Äì76%</td>
<td>C</td>
<td>For work which meets the course requirements in every respect</td>
</tr>
<tr class="even">
<td>70%‚Äì72%</td>
<td>C‚Äì</td>
<td></td>
</tr>
<tr class="odd">
<td>63%‚Äì69%</td>
<td>D</td>
<td>Worthy of credit even though it fails to meet the course requirements</td>
</tr>
<tr class="even">
<td>0%‚Äì62%</td>
<td>F</td>
<td>Failed to meet minimum course requirements</td>
</tr>
</tbody>
</table>
<p>If you are taking the course S/N, the minimum criterion to receive an S is 80% (the equivalent of a B‚Äì letter grade). The S grade does not carry grade points and is not part of the GPA calculation, but the credits will count toward the student‚Äôs degree program if allowed by the college, campus, or program.</p>
<p><em>Any student who does not complete all homework assignments without making prior arrangements with the instructor will receive a grade of F/N.</em></p>
<p><br></p>
<section id="incomplete" class="level3">
<h3 class="anchored" data-anchor-id="incomplete">Incomplete</h3>
<p>Instructors may assign the registration symbol ‚ÄúI‚Äù for Incomplete if, at the time the incomplete is requested: (1) the student has successfully completed a substantial portion of the work of the course; and (2) due to extraordinary circumstances (<em>as determined by the instructor</em>), the student was prevented from completing the work of the course on time. The assignment of an ‚ÄúI‚Äù requires a written agreement with the student specifying the time and manner in which the student will complete the course requirements. For more information see <a href="https://policy.umn.edu/education/gradingtranscripts">Grading and Transcripts</a>.</p>
<p><br></p>
</section>
<section id="accessing-course-grades" class="level3">
<h3 class="anchored" data-anchor-id="accessing-course-grades">Accessing Course Grades</h3>
<p>Shortly after the course, you may access your grades online at <a href="http://myu.umn.edu">myU</a>. Assignments will be handed back in class or during office hours. Uncollected assignments will be retained for six weeks after the course and then discarded.</p>
<p><br></p>
</section>
</section>
<section id="assignment-faqs" class="level2">
<h2 class="anchored" data-anchor-id="assignment-faqs">Assignment FAQs</h2>
<p><strong>How do I submit the assignment?</strong></p>
<p>Create a PDF of your responses and submit the PDF via email to both the instructor and TA. Also cc any group members. Before you submit the assignment check that:</p>
<ul class="task-list">
<li><label><input type="checkbox">All group members‚Äô names are on the assignment.</label></li>
<li><label><input type="checkbox">All tables are numbered and have a caption.</label></li>
<li><label><input type="checkbox">All figures are numbered and have a caption.</label></li>
<li><label><input type="checkbox">All figures are re-sized to not take up more page space than is necessary to read them.</label></li>
<li><label><input type="checkbox">No R syntax is included unless the question specifically asked for the syntax to be included. If there is R syntax included, be sure that it is typeset in a monospaced font (e.g., Courier, Inconsolata).</label></li>
<li><label><input type="checkbox">Do not submit the script file you used unless the directions specifically ask you to submit it.</label></li>
</ul>
<p><strong>Do I need to turn in the script file?</strong></p>
<p>No‚Ä¶unless the directions specifically ask you to submit the script file. The script file is for your reference. Future assignments will sometimes have questions that reference older assignments, so an organized and well-commented script file is a good idea. Moreover, the TA or myself may ask you to submit your syntax after you submit the assignment to help us interpret mistakes you made on the assignment so that we can provide more thorough feedback.</p>
<p><strong>Will you provide answer keys to the assignments?</strong></p>
<p>No.&nbsp;You will get back several comments on your assignments that address what you did wrong. The educational research is pretty clear that feedback is more helpful to student learning than providing correct answers. If you have further questions or need additional clarification, you are welcome to come to office hours or make an appointment with the instructor or TA.</p>
<p><strong>Will you go over the answers in class?</strong></p>
<p>No.&nbsp;I will address broad concepts if several students/groups made the same mistake, but otherwise, since each student/group makes unique mistakes going over the assignments more broadly is not a good use of our limited class time. The feedback should be helpful in understanding any mistakes you made, but if it isn‚Äôt, you are welcome to come to office hours or make an appointment with the instructor or TA.</p>
<p><strong>Will you look at our assignment prior to us submitting it?</strong></p>
<p>The instructor or TA will not ‚Äúpre-grade‚Äù your assignment. If there is a ‚ÄúPreparation‚Äù part of the assignment we can ensure that you did that part correctly, and we can also give you feedback about syntax, but we will not tell you if an answer is correct or not. We can also answer clarifying questions (e.g., ‚ÄòI know Question 8 is asking about [‚Ä¶], but I‚Äôm not sure what this question is looking for. Is there another way to restate this question?‚Äô). If you completed the assignment without any trouble, then be confident in your work and simply submit the assignment! üòÑ If you are unsure about something specific, then ask about that specific thing rather than a general ‚Äòdid I do this right‚Äô!</p>
<p><strong>Will we be able to re-do the assignment?</strong></p>
<p>Generally no. Since you have the opportunity to work in groups on the assignments, you should be able offset any of the issues that come up that would necessitate a re-submission. The exception to this is that we may allow you to re-do Assignment 1. If we do this, we will send you an email requesting that you resubmit part, or all of Assignment 1. You will not receive much feedback on your assignment prior to your re-submission. This is because during the first assignment you are learning not only content, but also expectations around how to respond to the questions we ask.</p>
<p><br></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>